<div class="detail-container">

  <button class="btn-back" (click)="goBack()">â† Retour</button>

  <h1>DÃ©tail de la transaction</h1>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div *ngIf="loading" class="loading-card">
    Chargement...
  </div>

  <div *ngIf="!loading && transaction" class="detail-card">

    <!-- Bandeau principal -->
    <div class="top-row">
      <div class="avatar">
        {{ getInitials(getDisplayName()) }}
      </div>

      <div class="main-info">
        <div class="title">{{ getDisplayName() }}</div>
        <div class="subtitle">{{ formatDate(getDateValue()) }}</div>
      </div>

      <div class="amount"
           [class.credit]="getSignedAmount() > 0"
           [class.debit]="getSignedAmount() < 0">
        {{ getSignedAmount() | currency:'EUR':'symbol':'1.2-2' }}
      </div>
    </div>

    <!-- Infos copiables -->
    <div class="grid">

      <div class="row">
        <span class="label">ID transaction</span>
        <span class="value with-copy">
          {{ getTransactionId() }}
          <button class="copy-btn"
                  type="button"
                  (click)="copyToClipboard(getTransactionId(), 'txId')"
                  [disabled]="!getTransactionId()">
            ğŸ“‹
          </button>
          <span class="copied" *ngIf="copiedKey === 'txId'">CopiÃ© âœ“</span>
        </span>
      </div>

      <div class="row">
        <span class="label">Statut</span>
        <span class="value badge">{{ getStatus() }}</span>
      </div>

      <div class="row">
        <span class="label">Compte Ã©metteur</span>
        <span class="value with-copy">
          {{ getEmitterAccountId() }}
          <button class="copy-btn"
                  type="button"
                  (click)="copyToClipboard(getEmitterAccountId(), 'fromId')"
                  [disabled]="!getEmitterAccountId()">
            ğŸ“‹
          </button>
          <span class="copied" *ngIf="copiedKey === 'fromId'">CopiÃ© âœ“</span>
        </span>
      </div>

      <div class="row">
        <span class="label">Compte receveur</span>
        <span class="value with-copy">
          {{ getReceiverAccountId() }}
          <button class="copy-btn"
                  type="button"
                  (click)="copyToClipboard(getReceiverAccountId(), 'toId')"
                  [disabled]="!getReceiverAccountId()">
            ğŸ“‹
          </button>
          <span class="copied" *ngIf="copiedKey === 'toId'">CopiÃ© âœ“</span>
        </span>
      </div>

      <div class="row full">
        <span class="label">Description</span>
        <span class="value">{{ getDescription() }}</span>
      </div>

    </div>

  </div>
</div>
